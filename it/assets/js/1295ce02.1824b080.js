"use strict";(globalThis.webpackChunknebula=globalThis.webpackChunknebula||[]).push([[458],{3358:(e,n,t)=>{t.r(n),t.d(n,{default:()=>d});var s=t(6540),r=t(1656),l=t(1312),a=t(4848);function o(e){const n=e.match(/<!\[LOG\[(.*?)]LOG]!>/);if(!n)return null;const t=n[1];if(!t.replace(/[-\s]/g,"").length)return null;const s=e.slice(n.index+n[0].length),r=e=>{const n=s.match(new RegExp(e+'="([^"]*)"'));return n?n[1]:""},l=r("time"),a=r("date"),o=r("component"),i=r("context"),c=r("type"),d=r("thread"),{time:m}=function(e){if(!e)return{time:"",offset:""};const n=e.split("+");return{time:n[0]||"",offset:n[1]||""}}(l),{level:u,levelName:h}=function(e){switch(parseInt(e,10)){case 0:return{level:"Success",levelName:"Success"};case 1:return{level:"Info",levelName:"Information"};case 2:return{level:"Warning",levelName:"Warning"};case 3:return{level:"Error",levelName:"Error"};case 4:case 5:return{level:"Debug",levelName:"Debug"};default:return{level:"Unknown",levelName:`Unknown (${e})`}}}(c);let p="";const g=t.match(/^\[(.+?)\]/);return g&&(p=g[1]),{id:`${a||""}_${l||""}_${o||""}_${d||""}_${t.slice(0,20)}`,date:a,time:m,component:o,context:i,typeRaw:c,level:u,levelName:h,thread:d,scriptSection:p,message:t}}function i(e){const n=e.split(/\r?\n/),t=[];let s=null;for(const l of n){const e=l.trim();if(!e)continue;const n=o(e);n?(t.push(n),s=n):s&&(s.message+="\n"+l)}const r=[...new Set(t.map(e=>e.component).filter(Boolean))].sort();return{entries:t,components:r}}function c(e,n){if(!n)return e;const t=e.toLowerCase(),s=n.toLowerCase(),r=[];let l,o=0,i=0;for(;-1!==(l=t.indexOf(s,o));)l>o&&r.push(e.slice(o,l)),r.push((0,a.jsx)("mark",{children:e.slice(l,l+s.length)},"h-"+i++)),o=l+s.length;return o<e.length&&r.push(e.slice(o)),r}function d(){const[e,n]=(0,s.useState)(""),[t,o]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[u,h]=(0,s.useState)("all"),[p,g]=(0,s.useState)("all"),[v,x]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[b,w]=(0,s.useState)({}),y=(0,s.useRef)(null),N=function(e,n,t,s){const r=s.toLowerCase();return e.filter(e=>!("all"!==n&&e.level!==n||"all"!==t&&e.component!==t||r&&!e.message.toLowerCase().includes(r)))}(t,u,p,v),S=function(e){if(!e.length)return{total:0,perLevel:{Success:0,Info:0,Warning:0,Error:0,Debug:0,Unknown:0},components:0,start:null,end:null};const n={Success:0,Info:0,Warning:0,Error:0,Debug:0,Unknown:0},t=new Set;e.forEach(e=>{void 0!==n[e.level]?n[e.level]++:n.Unknown++,e.component&&t.add(e.component)});const s=e[0],r=e[e.length-1];return{total:e.length,perLevel:n,components:t.size,start:s,end:r}}(t);let k="";if(t.length){const e=f?f+" \u2013 ":"";k=N.length===t.length?`${e}Showing ${t.length} entries.`:`${e}Showing ${N.length} of ${t.length} entries (filtered).`}else k=e.trim()?"No valid PSADT entries found.":f||"No data loaded.";return(0,a.jsxs)(r.A,{title:"PSADT Log Viewer",description:"Inspect, filter and analyze PSADT style logs.",children:[(0,a.jsx)("style",{children:"\n            .psadt-tableWrapper {\n                overflow-x: auto;     /* horizontal scroll */\n                overflow-y: visible;  /* no inner vertical scroll */\n                margin-bottom: 1rem;\n            }\n            .psadt-status {\n                font-size: .9rem;\n                color: var(--ifm-color-secondary-text);\n            }\n            .psadt-rowError  { background: var(--ifm-color-danger-contrast-background); }\n            .psadt-rowWarning{ background: var(--ifm-color-warning-contrast-background); }\n            .psadt-level-Success { color: var(--ifm-color-success); font-weight: 600; }\n            .psadt-level-Error   { color: var(--ifm-color-danger); font-weight: 600; }\n            .psadt-level-Warning { color: var(--ifm-color-warning); font-weight: 600; }\n            .psadt-level-Info    { color: var(--ifm-color-primary); }\n            .psadt-level-Debug   { color: var(--ifm-color-secondary); }\n\n            /* compact table font & padding */\n            .psadt-table {\n                font-size: 0.85rem;\n            }\n            .psadt-table th,\n            .psadt-table td {\n                padding: 0.25rem 0.5rem;\n            }\n\n            .psadt-summaryCard {\n                border-radius: var(--ifm-global-radius);\n                border: 1px solid var(--ifm-toc-border-color);\n                padding: 0.75rem 1rem;\n                margin-top: 1rem;\n                margin-bottom: 0.5rem;\n            }\n            .psadt-summaryRow {\n                display: flex;\n                flex-wrap: wrap;\n                gap: .75rem;\n                font-size: 0.9rem;\n            }\n            .psadt-summaryItem {\n                min-width: 120px;\n            }\n            .psadt-messageCell button {\n                margin-top: 0.25rem;\n            }\n            "}),(0,a.jsxs)("main",{className:"container margin-vert--lg",children:[(0,a.jsx)("h1",{className:"margin-bottom--md",children:"PSADT Log Viewer"}),(0,a.jsx)("p",{className:"margin-bottom--md",children:(0,a.jsx)(l.A,{id:"psadtLogViewer.intro",values:{br:(0,a.jsx)("br",{})},children:"This tool lets you inspect PSAppDeployToolkit / CMTrace-style log files directly in your browser.{br}\n                        Load a file or paste its content, then filter by level, component or text."})}),(0,a.jsxs)("div",{className:"margin-bottom--md",children:[(0,a.jsxs)("label",{className:"button button--secondary button--sm",style:{cursor:"pointer",marginRight:"0.5rem"},children:["Choose log file",(0,a.jsx)("input",{type:"file",accept:".log,.txt",style:{display:"none"},onChange:function(e){const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=e=>{const s=e.target.result||"";n(s),j(`Loaded file: ${t.name} (${t.size} bytes)`);const r=i(s);o(r.entries),m(r.components),g("all"),w({})},s.readAsText(t)}})]}),(0,a.jsx)("button",{className:"button button--primary button--sm",onClick:function(){const n=i(e);o(n.entries),m(n.components),g("all"),w({})},children:"Parse log"}),!1]}),(0,a.jsx)("textarea",{style:{width:"100%",minHeight:"220px"},placeholder:"Paste PSADT log here or load a file ...",value:e,onChange:e=>n(e.target.value)}),t.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"psadt-summaryCard",children:[(0,a.jsxs)("div",{className:"psadt-summaryRow",children:[(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Total entries:"})," ",S.total]}),(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Success:"})," ",S.perLevel.Success]}),(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Info:"})," ",S.perLevel.Info]}),(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Warning:"})," ",S.perLevel.Warning]}),(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Error:"})," ",S.perLevel.Error]}),(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Debug:"})," ",S.perLevel.Debug]}),(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Unknown:"})," ",S.perLevel.Unknown]})]}),(0,a.jsxs)("div",{className:"psadt-summaryRow",style:{marginTop:".4rem"},children:[(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Components:"})," ",S.components]}),S.start&&S.end&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"Start:"})," ",S.start.date," ",S.start.time]}),(0,a.jsxs)("div",{className:"psadt-summaryItem",children:[(0,a.jsx)("strong",{children:"End:"})," ",S.end.date," ",S.end.time]})]})]})]}),(0,a.jsxs)("div",{className:"row margin-top--md margin-bottom--sm",children:[(0,a.jsxs)("div",{className:"col col--4",children:[(0,a.jsx)("span",{style:{fontSize:"0.85rem"},children:"Level"}),(0,a.jsxs)("select",{style:{width:"100%",marginTop:4},value:u,onChange:e=>h(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"Success",children:"Success"}),(0,a.jsx)("option",{value:"Info",children:"Info"}),(0,a.jsx)("option",{value:"Warning",children:"Warning"}),(0,a.jsx)("option",{value:"Error",children:"Error"}),(0,a.jsx)("option",{value:"Debug",children:"Debug"}),(0,a.jsx)("option",{value:"Unknown",children:"Unknown"})]})]}),(0,a.jsxs)("div",{className:"col col--4",children:[(0,a.jsx)("span",{style:{fontSize:"0.85rem"},children:"Component"}),(0,a.jsxs)("select",{style:{width:"100%",marginTop:4},value:p,onChange:e=>g(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"All components"}),d.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"col col--4",children:[(0,a.jsx)("span",{style:{fontSize:"0.85rem"},children:"Message contains"}),(0,a.jsx)("input",{type:"text",style:{width:"100%",marginTop:4},placeholder:"Text filter...",value:v,onChange:e=>x(e.target.value)})]})]}),(0,a.jsx)("p",{className:"psadt-status",children:k})]}),t.length>0&&(0,a.jsx)("div",{ref:y,className:"psadt-tableWrapper",children:(0,a.jsxs)("table",{className:"table psadt-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"#"}),(0,a.jsx)("th",{children:"Message"}),(0,a.jsx)("th",{children:"Component"}),(0,a.jsx)("th",{children:"Date/Time"}),(0,a.jsx)("th",{children:"Thread"})]})}),(0,a.jsx)("tbody",{children:N.map((e,n)=>{const t="Error"===e.level?"psadt-rowError":"Warning"===e.level?"psadt-rowWarning":"",r=e.level?"psadt-level-"+e.level:"",l=e.message.includes("\n"),o=!!b[e.id];let i;if(l&&!o){i=`${e.message.split("\n")[0]} \u2026`}else i=e.message;const d=l&&o?function(e,n){const t=e.split("\n");return t.map((e,r)=>(0,a.jsxs)(s.Fragment,{children:[c(e,n),r<t.length-1&&(0,a.jsx)("br",{})]},r))}(i,v):c(i,v);return(0,a.jsxs)("tr",{className:t,children:[(0,a.jsx)("td",{children:n+1}),(0,a.jsxs)("td",{className:"psadt-messageCell",style:{whiteSpace:"pre-wrap"},children:[d,l&&(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"button",className:"button button--link button--sm",onClick:()=>{return n=e.id,void w(e=>({...e,[n]:!e[n]}));var n},children:o?"Show less":"Show more"})})]}),(0,a.jsx)("td",{children:e.component}),(0,a.jsxs)("td",{children:[e.date," ",e.time]}),(0,a.jsx)("td",{className:r,children:e.thread})]},e.id||n)})})]})})]})]})}}}]);