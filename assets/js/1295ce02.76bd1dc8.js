"use strict";(globalThis.webpackChunknebula=globalThis.webpackChunknebula||[]).push([[1458],{3358:(e,n,t)=>{t.r(n),t.d(n,{default:()=>c});var s=t(6540),r=t(1656),l=t(4848);function a(e){const n=e.match(/<!\[LOG\[(.*?)]LOG]!>/);if(!n)return null;const t=n[1];if(!t.replace(/[-\s]/g,"").length)return null;const s=e.slice(n.index+n[0].length),r=e=>{const n=s.match(new RegExp(e+'="([^"]*)"'));return n?n[1]:""},l=r("time"),a=r("date"),o=r("component"),i=r("context"),c=r("type"),d=r("thread"),{time:m}=function(e){if(!e)return{time:"",offset:""};const n=e.split("+");return{time:n[0]||"",offset:n[1]||""}}(l),{level:u,levelName:h}=function(e){switch(parseInt(e,10)){case 0:return{level:"Success",levelName:"Success"};case 1:return{level:"Info",levelName:"Information"};case 2:return{level:"Warning",levelName:"Warning"};case 3:return{level:"Error",levelName:"Error"};case 4:case 5:return{level:"Debug",levelName:"Debug"};default:return{level:"Unknown",levelName:`Unknown (${e})`}}}(c);let p="";const g=t.match(/^\[(.+?)\]/);return g&&(p=g[1]),{id:`${a||""}_${l||""}_${o||""}_${d||""}_${t.slice(0,20)}`,date:a,time:m,component:o,context:i,typeRaw:c,level:u,levelName:h,thread:d,scriptSection:p,message:t}}function o(e){const n=e.split(/\r?\n/),t=[];let s=null;for(const l of n){const e=l.trim();if(!e)continue;const n=a(e);n?(t.push(n),s=n):s&&(s.message+="\n"+l)}const r=[...new Set(t.map(e=>e.component).filter(Boolean))].sort();return{entries:t,components:r}}function i(e,n){if(!n)return e;const t=e.toLowerCase(),s=n.toLowerCase(),r=[];let a,o=0,i=0;for(;-1!==(a=t.indexOf(s,o));)a>o&&r.push(e.slice(o,a)),r.push((0,l.jsx)("mark",{children:e.slice(a,a+s.length)},"h-"+i++)),o=a+s.length;return o<e.length&&r.push(e.slice(o)),r}function c(){const[e,n]=(0,s.useState)(""),[t,a]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[m,u]=(0,s.useState)("all"),[h,p]=(0,s.useState)("all"),[g,v]=(0,s.useState)(""),[x,f]=(0,s.useState)(""),[j,b]=(0,s.useState)({}),w=(0,s.useRef)(null),y=function(e,n,t,s){const r=s.toLowerCase();return e.filter(e=>!("all"!==n&&e.level!==n||"all"!==t&&e.component!==t||r&&!e.message.toLowerCase().includes(r)))}(t,m,h,g),N=function(e){if(!e.length)return{total:0,perLevel:{Success:0,Info:0,Warning:0,Error:0,Debug:0,Unknown:0},components:0,start:null,end:null};const n={Success:0,Info:0,Warning:0,Error:0,Debug:0,Unknown:0},t=new Set;e.forEach(e=>{void 0!==n[e.level]?n[e.level]++:n.Unknown++,e.component&&t.add(e.component)});const s=e[0],r=e[e.length-1];return{total:e.length,perLevel:n,components:t.size,start:s,end:r}}(t);let S="";if(t.length){const e=x?x+" \u2013 ":"";S=y.length===t.length?`${e}Showing ${t.length} entries.`:`${e}Showing ${y.length} of ${t.length} entries (filtered).`}else S=e.trim()?"No valid PSADT entries found.":x||"No data loaded.";return(0,l.jsxs)(r.A,{title:"PSADT Log Viewer",description:"Inspect, filter and analyze PSADT style logs.",children:[(0,l.jsx)("style",{children:"\n            .psadt-tableWrapper {\n                overflow-x: auto;     /* horizontal scroll */\n                overflow-y: visible;  /* no inner vertical scroll */\n                margin-bottom: 1rem;\n            }\n            .psadt-status {\n                font-size: .9rem;\n                color: var(--ifm-color-secondary-text);\n            }\n            .psadt-rowError  { background: var(--ifm-color-danger-contrast-background); }\n            .psadt-rowWarning{ background: var(--ifm-color-warning-contrast-background); }\n            .psadt-level-Success { color: var(--ifm-color-success); font-weight: 600; }\n            .psadt-level-Error   { color: var(--ifm-color-danger); font-weight: 600; }\n            .psadt-level-Warning { color: var(--ifm-color-warning); font-weight: 600; }\n            .psadt-level-Info    { color: var(--ifm-color-primary); }\n            .psadt-level-Debug   { color: var(--ifm-color-secondary); }\n\n            /* compact table font & padding */\n            .psadt-table {\n                font-size: 0.85rem;\n            }\n            .psadt-table th,\n            .psadt-table td {\n                padding: 0.25rem 0.5rem;\n            }\n\n            .psadt-summaryCard {\n                border-radius: var(--ifm-global-radius);\n                border: 1px solid var(--ifm-toc-border-color);\n                padding: 0.75rem 1rem;\n                margin-top: 1rem;\n                margin-bottom: 0.5rem;\n            }\n            .psadt-summaryRow {\n                display: flex;\n                flex-wrap: wrap;\n                gap: .75rem;\n                font-size: 0.9rem;\n            }\n            .psadt-summaryItem {\n                min-width: 120px;\n            }\n            .psadt-messageCell button {\n                margin-top: 0.25rem;\n            }\n            "}),(0,l.jsxs)("main",{className:"container margin-vert--lg",children:[(0,l.jsx)("h1",{className:"margin-bottom--md",children:"PSADT Log Viewer"}),(0,l.jsxs)("p",{className:"margin-bottom--md",children:["This tool lets you inspect PSAppDeployToolkit / CMTrace-style log files directly in your browser.",(0,l.jsx)("br",{}),"You can either load a log file or paste its content, then filter by level, component and message text."]}),(0,l.jsxs)("div",{className:"margin-bottom--md",children:[(0,l.jsxs)("label",{className:"button button--secondary button--sm",style:{cursor:"pointer",marginRight:"0.5rem"},children:["Choose log file",(0,l.jsx)("input",{type:"file",accept:".log,.txt",style:{display:"none"},onChange:function(e){const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=e=>{const s=e.target.result||"";n(s),f(`Loaded file: ${t.name} (${t.size} bytes)`);const r=o(s);a(r.entries),d(r.components),p("all"),b({})},s.readAsText(t)}})]}),(0,l.jsx)("button",{className:"button button--primary button--sm",onClick:function(){const n=o(e);a(n.entries),d(n.components),p("all"),b({})},children:"Parse log"}),!1]}),(0,l.jsx)("textarea",{style:{width:"100%",minHeight:"220px"},placeholder:"Paste PSADT log here or load a file ...",value:e,onChange:e=>n(e.target.value)}),t.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"psadt-summaryCard",children:[(0,l.jsxs)("div",{className:"psadt-summaryRow",children:[(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Total entries:"})," ",N.total]}),(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Success:"})," ",N.perLevel.Success]}),(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Info:"})," ",N.perLevel.Info]}),(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Warning:"})," ",N.perLevel.Warning]}),(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Error:"})," ",N.perLevel.Error]}),(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Debug:"})," ",N.perLevel.Debug]}),(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Unknown:"})," ",N.perLevel.Unknown]})]}),(0,l.jsxs)("div",{className:"psadt-summaryRow",style:{marginTop:".4rem"},children:[(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Components:"})," ",N.components]}),N.start&&N.end&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"Start:"})," ",N.start.date," ",N.start.time]}),(0,l.jsxs)("div",{className:"psadt-summaryItem",children:[(0,l.jsx)("strong",{children:"End:"})," ",N.end.date," ",N.end.time]})]})]})]}),(0,l.jsxs)("div",{className:"row margin-top--md margin-bottom--sm",children:[(0,l.jsxs)("div",{className:"col col--4",children:[(0,l.jsx)("span",{style:{fontSize:"0.85rem"},children:"Level"}),(0,l.jsxs)("select",{style:{width:"100%",marginTop:4},value:m,onChange:e=>u(e.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All"}),(0,l.jsx)("option",{value:"Success",children:"Success"}),(0,l.jsx)("option",{value:"Info",children:"Info"}),(0,l.jsx)("option",{value:"Warning",children:"Warning"}),(0,l.jsx)("option",{value:"Error",children:"Error"}),(0,l.jsx)("option",{value:"Debug",children:"Debug"}),(0,l.jsx)("option",{value:"Unknown",children:"Unknown"})]})]}),(0,l.jsxs)("div",{className:"col col--4",children:[(0,l.jsx)("span",{style:{fontSize:"0.85rem"},children:"Component"}),(0,l.jsxs)("select",{style:{width:"100%",marginTop:4},value:h,onChange:e=>p(e.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All components"}),c.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"col col--4",children:[(0,l.jsx)("span",{style:{fontSize:"0.85rem"},children:"Message contains"}),(0,l.jsx)("input",{type:"text",style:{width:"100%",marginTop:4},placeholder:"Text filter...",value:g,onChange:e=>v(e.target.value)})]})]}),(0,l.jsx)("p",{className:"psadt-status",children:S})]}),t.length>0&&(0,l.jsx)("div",{ref:w,className:"psadt-tableWrapper",children:(0,l.jsxs)("table",{className:"table psadt-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"#"}),(0,l.jsx)("th",{children:"Message"}),(0,l.jsx)("th",{children:"Component"}),(0,l.jsx)("th",{children:"Date/Time"}),(0,l.jsx)("th",{children:"Thread"})]})}),(0,l.jsx)("tbody",{children:y.map((e,n)=>{const t="Error"===e.level?"psadt-rowError":"Warning"===e.level?"psadt-rowWarning":"",r=e.level?"psadt-level-"+e.level:"",a=e.message.includes("\n"),o=!!j[e.id];let c;if(a&&!o){c=`${e.message.split("\n")[0]} \u2026`}else c=e.message;const d=a&&o?function(e,n){const t=e.split("\n");return t.map((e,r)=>(0,l.jsxs)(s.Fragment,{children:[i(e,n),r<t.length-1&&(0,l.jsx)("br",{})]},r))}(c,g):i(c,g);return(0,l.jsxs)("tr",{className:t,children:[(0,l.jsx)("td",{children:n+1}),(0,l.jsxs)("td",{className:"psadt-messageCell",style:{whiteSpace:"pre-wrap"},children:[d,a&&(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"button",className:"button button--link button--sm",onClick:()=>{return n=e.id,void b(e=>({...e,[n]:!e[n]}));var n},children:o?"Show less":"Show more"})})]}),(0,l.jsx)("td",{children:e.component}),(0,l.jsxs)("td",{children:[e.date," ",e.time]}),(0,l.jsx)("td",{className:r,children:e.thread})]},e.id||n)})})]})})]})]})}}}]);